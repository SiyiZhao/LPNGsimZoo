# Nbody codes 

We test several Nbody codes. 
These works are done on a remote computer, so pay attention to the paths.

Read the details in [Cheng's notes](./nbody-code.md).

## PKDgrav3

We test the [PKDgrav3 code](https://pkdgrav3.readthedocs.io/en/latest/) on a computer with GPU, named 'r88'. 
We show the scripts and configuration files, but there are 2 'lib' codes keeped on `r88` but not this repo: 1. the PKDgrav3 code, 2. the 2LPT code used is the version same as Quijote's.

The test is with the following settings:
- L=1Gpc/h, N=512^3,
- z_i=127, z_f=0, Nstep=100, 
- the IC is generated by 2LPT code, the origin format is gadget, and then convert to hdf5 as PKDgrav3 code need.
- gpu: 3090/H200; cpu: 32 cores, 128 threads.
It takes ~2 hours on 3090, or ~1 hour on H200.

We also test the code without GPU acceleration on H200, it takes half an hour more.

## MP-Gadget

We test the [MP-Gadget code](https://github.com/MP-Gadget/MP-Gadget) with the same configurations as Quijote.

- The input IC and output snapshot of MP-Gadget is in bigfile format.